/*!
 * w-opencc v1.0.3
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs"),require("process"),require("child_process")):"function"==typeof define&&define.amd?define(["path","fs","process","child_process"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-opencc"]=e(t.path,t.fs,t.process,t.child_process)}(this,(function(t,e,n,r){"use strict";var o=/\s/;var i=/^\s+/;function c(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&o.test(t.charAt(e)););return e}(t)+1).replace(i,""):t}function u(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,f=a||s||Function("return this")(),l=f.Symbol,p=Object.prototype,h=p.hasOwnProperty,d=p.toString,y=l?l.toStringTag:void 0;var v=Object.prototype.toString;var g=l?l.toStringTag:void 0;function _(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":g&&g in Object(t)?function(t){var e=h.call(t,y),n=t[y];try{t[y]=void 0;var r=!0}catch(t){}var o=d.call(t);return r&&(e?t[y]=n:delete t[y]),o}(t):function(t){return v.call(t)}(t)}function b(t){return null!=t&&"object"==typeof t}function w(t){return"symbol"==typeof t||b(t)&&"[object Symbol]"==_(t)}var m=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,S=/^0o[0-7]+$/i,O=parseInt;function x(t){if("number"==typeof t)return t;if(w(t))return NaN;if(u(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=c(t);var n=j.test(t);return n||S.test(t)?O(t.slice(2),n?2:8):m.test(t)?NaN:+t}var $=1/0;function B(t){return t?(t=x(t))===$||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function P(t){var e=B(t),n=e%1;return e==e?n?e-n:e:0}function z(t){return"[object String]"===Object.prototype.toString.call(t)}function A(t){return!(!z(t)||""===t)}function C(t){return t!=t}function F(t){let e=!1;if(A(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(C(t))return!1;e=!0}return e}function M(t){if(!F(t))return 0;return B(t)}function N(t){return!!F(t)&&(t=M(t),"number"==typeof(e=t)&&e==P(e));var e}var T=Array.isArray,E=l?l.prototype:void 0,k=E?E.toString:void 0;function I(t){if("string"==typeof t)return t;if(T(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,I)+"";if(w(t))return k?k.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function U(t){return null==t?"":I(t)}var R=f.isFinite,H=Math.min;var q,D=(q=Math["round"],function(t,e){if(t=x(t),(e=null==e?0:H(P(e),292))&&R(t)){var n=(U(t)+"e").split("e");return+((n=(U(q(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return q(t)});function L(t){if(!F(t))return 0;t=M(t);let e=D(t);return"0"===String(e)?0:e}let V="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),W=V.length;function G(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=[];var n;t=N(n=t)&&L(n)>0?L(t):32;for(let n=0;n<t;n++)e[n]=V[0|Math.random()*W];return e.join("")}var J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function K(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var X={exports:{}};var Y,Z={exports:{}},tt=Q(Object.freeze({__proto__:null,default:{}}));function et(){return Y||(Y=1,function(t){var e;t.exports=(e=e||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==J&&J.crypto&&(n=J.crypto),!n)try{n=tt}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},c=i.lib={},u=c.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=c.WordArray=u.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var c=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=c<<24-(r+i)%4*8}else for(var u=0;u<o;u+=4)e[r+u>>>2]=n[u>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new a.init(e,t)}}),s=i.enc={},f=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},l=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},p=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},h=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,c=this.blockSize,u=i/(4*c),s=(u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0))*c,f=t.min(4*s,i);if(s){for(var l=0;l<s;l+=c)this._doProcessBlock(o,l);n=o.splice(0,s),r.sigBytes-=f}return new a.init(n,f)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});c.Hasher=h.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}});var d=i.algo={};return i}(Math),e)}(Z)),Z.exports}!function(t){t.exports=et().enc.Utf8}(X);var nt=K(X.exports),rt={exports:{}};!function(t){var e;t.exports=(e=et(),function(){var t=e,n=t.lib.WordArray;function r(t,e,r){for(var o=[],i=0,c=0;c<e;c++)if(c%4){var u=r[t.charCodeAt(c-1)]<<c%4*2|r[t.charCodeAt(c)]>>>6-c%4*2;o[i>>>2]|=u<<24-i%4*8,i++}return n.create(o,i)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var c=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,u=0;u<4&&i+.75*u<n;u++)o.push(r.charAt(c>>>6*(3-u)&63));var a=r.charAt(64);if(a)for(;o.length%4;)o.push(a);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var c=n.charAt(64);if(c){var u=t.indexOf(c);-1!==u&&(e=u)}return r(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)}(rt);var ot=K(rt.exports);var it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ct=/^\w*$/;var ut,at=f["__core-js_shared__"],st=(ut=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||""))?"Symbol(src)_1."+ut:"";var ft=Function.prototype.toString;var lt=/^\[object .+?Constructor\]$/,pt=Function.prototype,ht=Object.prototype,dt=pt.toString,yt=ht.hasOwnProperty,vt=RegExp("^"+dt.call(yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gt(t){if(!u(t)||function(t){return!!st&&st in t}(t))return!1;var e=function(t){if(!u(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)?vt:lt;return e.test(function(t){if(null!=t){try{return ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function _t(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return gt(n)?n:void 0}var bt=_t(Object,"create");var wt=Object.prototype.hasOwnProperty;var mt=Object.prototype.hasOwnProperty;function jt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function St(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}jt.prototype.clear=function(){this.__data__=bt?bt(null):{},this.size=0},jt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wt.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:mt.call(e,t)},jt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bt&&void 0===e?"__lodash_hash_undefined__":e,this};var Ot=Array.prototype.splice;function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=St(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ot.call(e,n,1),--this.size,!0)},xt.prototype.get=function(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]},xt.prototype.has=function(t){return St(this.__data__,t)>-1},xt.prototype.set=function(t,e){var n=this.__data__,r=St(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var $t=_t(f,"Map");function Bt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Pt.prototype.clear=function(){this.size=0,this.__data__={hash:new jt,map:new($t||xt),string:new jt}},Pt.prototype.delete=function(t){var e=Bt(this,t).delete(t);return this.size-=e?1:0,e},Pt.prototype.get=function(t){return Bt(this,t).get(t)},Pt.prototype.has=function(t){return Bt(this,t).has(t)},Pt.prototype.set=function(t,e){var n=Bt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function zt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var c=t.apply(this,r);return n.cache=i.set(o,c)||i,c};return n.cache=new(zt.Cache||Pt),n}zt.Cache=Pt;var At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/\\(\\)?/g,Ft=function(t){var e=zt(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(At,(function(t,n,r,o){e.push(r?o.replace(Ct,"$1"):n||t)})),e})),Mt=Ft;function Nt(t,e){return T(t)?t:function(t,e){if(T(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!w(t))||ct.test(t)||!it.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:Mt(U(t))}function Tt(t){if("string"==typeof t||w(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Et(t,e,n){var r=null==t?void 0:function(t,e){for(var n=0,r=(e=Nt(e,t)).length;null!=t&&n<r;)t=t[Tt(e[n++])];return n&&n==r?t:void 0}(t,e);return void 0===r?n:r}function kt(t){return"[object Array]"===Object.prototype.toString.call(t)}function It(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)){for(let e in t)return!1;return!0}return!1}function Ut(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!It(t)||(!!function(t){return!(!z(t)||""!==t)}(t)||(!!function(t){return!!kt(t)&&0===t.length}(t)||!!C(t)))))}function Rt(t){return!0===(e=t)||!1===e||b(e)&&"[object Boolean]"==_(e);var e}function Ht(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function qt(t){if(!N(t))return!1;return L(t)>=0}function Dt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((!kt(o=e)||0===o.length||1===o.length&&Ut(o[0]))&&!A(e))throw new Error("args is not an effective array or string");var o;A(e)&&(e=[e]);let i=Et(n,"mode");"spawn"!==i&&"exec"!==i&&"execFile"!==i&&(i="spawn");let c=Et(n,"cbStdout"),u=Et(n,"cbStderr"),a=Et(n,"codeCmd");A(a)||(a="utf8");let s=Et(n,"useChcp");Rt(s)||(s=!1);let f=function(){let t,e,n=new Promise((function(){t=arguments[0],e=arguments[1]}));return n.resolve=t,n.reject=e,n}(),l="",p="",h=null;if("spawn"===i){let n=(y=1,A(d=t)&&qt(y)?0===(y=L(y))?"":d.substring(0,y):""),o=function(t,e){if(!A(t))return"";if(!qt(e))return"";if(0===(e=L(e)))return"";let n=t.length-e;return n<0&&(n=0),t.substring(n,n+e)}(t,1);if('"'===n||'"'===o||"'"===n||"'"===o)throw new Error("prog of spawn doens not need to add quotes");h=r.spawn(t,e,{encoding:a,shell:!1})}else if("exec"===i){let n="";s&&(n="cmd /c chcp 65001>nul &&"),h=r.exec(`${n} ${t} ${e.join(" ")} & exit`,{encoding:a})}else{if("execFile"!==i)throw new Error(`invalid mode[${i}]`);h=r.execFile(t,e,{encoding:a})}var d,y;return h.stdout.on("data",(t=>{let e=t.toString().trim();l+=e+"\n",Ht(c)&&c(e)})),h.stderr.on("data",(t=>{let e=t.toString().trim();p+=e+"\n",Ht(u)&&u(e)})),h.on("close",(t=>{A(p)?f.reject(p):f.resolve(l)})),h.on("error",(t=>{f.reject(t)})),f}function Lt(t){return function(t){let e=Et(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");return!!e.existsSync(t)&&!e.lstatSync(t).isDirectory()&&!e.lstatSync(t).isSymbolicLink()}(t,{fs:e})}let Vt=t.resolve();return async function(t){let r=null;if("win32"!==n.platform)return Promise.reject("operating system is not windows");if(!A(t))return Promise.reject("str is not a string");let o="cvcc.exe",i="";{let t=`${Vt}/src/`,e=`${Vt}/node_modules/w-opencc/src/`;if(Lt(`${t}${o}`))i=t;else{if(!Lt(`${e}${o}`))return Promise.reject("can not find folder for opencc");i=e}}let c=`${i}${o}`,u=G(),a=`${i}_${u}_fpIn.txt`,s=`${i}_${u}_fpOut.txt`,f=t;e.writeFileSync(a,f,"utf8");let l={fpIn:a,fpOut:s,opt:{}},p=function(t){if(!A(t))return"";let e=nt.parse(t);return ot.stringify(e)}(JSON.stringify(l));await Dt(c,p).catch((t=>{console.log("execProcess catch",t),r=t.toString()}));let h=null;try{h=e.readFileSync(s,"utf8")}catch(t){}try{e.unlinkSync(a)}catch(t){}try{e.unlinkSync(s)}catch(t){}return r?Promise.reject(r):A(h)?h:Promise.reject(`output[${function(t){if(!A(t)&&!F(t)&&!w(t))return"";let e="";try{e=String(t)}catch(t){}try{e=t.toString()}catch(t){}return e}(h)}] is not an effective string`)}}));
//# sourceMappingURL=w-opencc.umd.js.map
